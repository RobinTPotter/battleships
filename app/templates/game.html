{% extends "layout.html" %}

{% block moremeta %}
<meta http-equiv="cache-control" content="max-age=0">
<meta http-equiv="cache-control" content="no-cache">
{% endblock %}


{% block content %}

<style>

table { border: none }
td, tr { border: 1px solid black; }
td { width:20px; height:20px; }
td.water { background-color: cyan }
td.miss { background-color: yellow }
td.hit { background-color: red }
td.boat { background-color: grey }

</style>
Stage: <span id="game_stage">{{ game.stage() }}</span>
<span id="whose_turn"></span>
<div id="myboard" style="display:inherit">
<h2>{{current_user.id}}</h2>
<table>
{% for row in game.show_board(current_user.id) %}
{% set r=loop.index -%}
<tr>
 {%- for col in row -%}
<td id="you_c{{loop.index}}r{{r}}" class="{{ col }}"></td>
 {%- endfor -%}
</tr>
{%- endfor %}
</table>
</div>

<div id="theirboard" style="display:none">
<h2 id="opponents_name">{{ game.opponent(current_user.id) }}</h2>
<table>
{% for row in game.show_opponent_view_board(current_user.id) %}
{% set r=loop.index -%}
<tr>
 {%- for col in row -%}
<td id="opp_c{{loop.index}}r{{r}}" class="{{ col }}"></td>
 {%- endfor -%}
</tr>
{%- endfor %}
</table>
</div>

<form>
<input type="button" value="swap" onclick="swap()"></input>
<input type="button" value="ping" onclick="ping()"></input>
<input type="button" value="ready" onclick="ready('{{ current_user.id }}','{{ game.id }}')"></input>
</form>


<script src="{{ url_for('static', filename='lib/socket-io/socket.io.min.js')}}"></script>
<script src="{{ url_for('static', filename='battleships.js')}}?{{ game.id }}"></script>

{% endblock %}

